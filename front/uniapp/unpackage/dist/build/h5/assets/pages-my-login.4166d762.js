import{y as e,A as a,v as s,x as o,R as r,s as t,q as l,o as n,c as i,w as u,i as d,b as m,h as p,r as f,B as c}from"./index-d86fb874.js";import{_ as g,a as y,b as _}from"./uni-forms.2336867c.js";import{_ as h,r as w}from"./uni-app.es.929e2abd.js";const x=h({data:()=>({formData:{username:"",password:""},rules:{username:{rules:[{required:!0,errorMessage:"please input your username"}]},password:{rules:[{required:!0,errorMessage:"please input your password"}]}}}),onLoad(){e().globalData.checkLogin()&&a()},methods:{login(){s.post(o.getApi("myLogin"),this.formData,(function(a){if(0==a.code){var s=(new Date).getTime();a.data.access_token.expired_at=s+1e3*a.data.access_token.expired_in,r({key:e().globalData.loginTokenKey,data:JSON.stringify(a.data),success:function(){t({url:"/pages/index/index"})}})}else l.error(a.message)}),{"Content-Type":"application/json"})},submit(){var e=this;e.$refs.form.validate().then((a=>{e.login()})).catch((e=>{console.log(e)}))}}},[["render",function(e,a,s,o,r,t){const l=w(f("uni-easyinput"),g),h=w(f("uni-forms-item"),y),x=w(f("uni-forms"),_),D=c,b=d;return n(),i(b,{class:"p-30"},{default:u((()=>[m(x,{ref:"form",model:r.formData,rules:r.rules,"label-position":"top"},{default:u((()=>[m(h,{label:"Username",name:"username",required:""},{default:u((()=>[m(l,{class:"uni-mt-5",prefixIcon:"person",type:"text",modelValue:r.formData.username,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.username=e),placeholder:""},null,8,["modelValue"])])),_:1}),m(h,{label:"Password",name:"password",required:""},{default:u((()=>[m(l,{class:"uni-mt-5",prefixIcon:"eye-slash",type:"password",modelValue:r.formData.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.password=e),placeholder:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),m(D,{type:"primary",onClick:t.submit},{default:u((()=>[p("Login")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-da02e9d6"]]);export{x as default};
